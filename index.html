<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>wSQL by igorizr1</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>wSQL</h1>
        <h2>wSQL - WebSQLite Active record for angular.</h2>
        <a href="https://github.com/igorizr1/wSQL" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="wsql" class="anchor" href="#wsql" aria-hidden="true"><span class="octicon octicon-link"></span></a>wSQL</h1>

<p>wSQL - angularJS active record module for WebSQLite database - database in the browser. U can persist your data for your PhoneGap HTML5 applications build with ionic or angular. Good solution for mobile applications with offline mode.</p>

<h2>
<a id="install-from-bower" class="anchor" href="#install-from-bower" aria-hidden="true"><span class="octicon octicon-link"></span></a>install from bower</h2>

<p>bower install w-sql</p>

<h3>
<a id="a-sample-of-config-fileu-need-to-set-your-db-schema-there-can-be-found-in-this-repo-at-srcwsqldbconfigjs-just-cope-it-in-your-project" class="anchor" href="#a-sample-of-config-fileu-need-to-set-your-db-schema-there-can-be-found-in-this-repo-at-srcwsqldbconfigjs-just-cope-it-in-your-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>A sample of config file(u need to set your DB schema there) can be found in this repo at src/wSQL.db.config.js (just cope it in your project)</h3>

<h3>
<a id="methods" class="anchor" href="#methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>methods:</h3>

<ul>
<li>wSQL.select...</li>
<li>wSQL.insert...</li>
<li>wSQL.batch_insert...</li>
<li>wSQL.update...</li>
<li>wSQL.delete...</li>
</ul>

<h3>
<a id="methods-to-query-request-and-generate-results-all-return-promises" class="anchor" href="#methods-to-query-request-and-generate-results-all-return-promises" aria-hidden="true"><span class="octicon octicon-link"></span></a>methods to query request and generate results (all return promises):</h3>

<ul>
<li>query - get all results</li>
<li>row   - get one row</li>
<li>col   - get one column</li>
</ul>

<div class="highlight highlight-javascript"><pre>
    ...
    .query().then(<span class="pl-st">function</span>(<span class="pl-vpf">result</span>){
        <span class="pl-c">// query returns promise</span>
        <span class="pl-en">console</span><span class="pl-s3">.log</span>(result);
    }, <span class="pl-st">function</span>(<span class="pl-vpf">error</span>){
        <span class="pl-c">// error result</span>
        <span class="pl-en">console</span><span class="pl-s3">.log</span>(error);
    })
</pre></div>

<h1>
<a id="list-of-query-modifiers" class="anchor" href="#list-of-query-modifiers" aria-hidden="true"><span class="octicon octicon-link"></span></a>list of query modifiers:</h1>

<ul>
<li>where</li>
<li>where_in</li>
<li>and</li>
<li>and_in</li>
<li>or</li>
<li>or_in</li>
<li>join</li>
<li>left_join</li>
<li>having</li>
<li>group_by</li>
<li>order_by</li>
<li>limit //limit also does offset as a second argument</li>
</ul>

<h3>
<a id="no-full-doc-yet-but-samples-below----pretty-simple" class="anchor" href="#no-full-doc-yet-but-samples-below----pretty-simple" aria-hidden="true"><span class="octicon octicon-link"></span></a>no full DOC yet but samples below -- pretty simple</h3>

<h3>
<a id="also-examples-can-be-found-in-examplesexample1" class="anchor" href="#also-examples-can-be-found-in-examplesexample1" aria-hidden="true"><span class="octicon octicon-link"></span></a>also examples can be found in examples/example1</h3>

<div class="highlight highlight-javascript"><pre>angular.module(<span class="pl-s1"><span class="pl-pds">'</span>sampleApp<span class="pl-pds">'</span></span>, [
    <span class="pl-s1"><span class="pl-pds">"</span>wSQL.db<span class="pl-pds">"</span></span>
])
.controller(<span class="pl-s1"><span class="pl-pds">'</span>SampleController<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">$scope</span>, <span class="pl-vpf">wSQL</span>) {

    <span class="pl-en">console</span><span class="pl-s3">.log</span>(wSQL);

    <span class="pl-c">// SELECT id, category_id FROM table1 WHERE id=? LIMIT 1</span>
    wSQL.<span class="pl-s3">select</span>(<span class="pl-s1"><span class="pl-pds">"</span>id, category_id<span class="pl-pds">"</span></span>)
        .from(<span class="pl-s1"><span class="pl-pds">"</span>table1<span class="pl-pds">"</span></span>)
        .where(<span class="pl-s1"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-c1">3</span>)
        .col()
        .then(<span class="pl-st">function</span>(<span class="pl-vpf">d</span>){
            <span class="pl-en">console</span><span class="pl-s3">.log</span>(d);
        });

    <span class="pl-c">// SELECT * FROM table1 WHERE id&gt;? AND category_id=? OR category_id=? LIMIT 1</span>
    wSQL.<span class="pl-s3">select</span>(<span class="pl-s1"><span class="pl-pds">"</span>*<span class="pl-pds">"</span></span>)
        .from(<span class="pl-s1"><span class="pl-pds">"</span>table1<span class="pl-pds">"</span></span>)
        .where(<span class="pl-s1"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-c1">3</span>, <span class="pl-s1"><span class="pl-pds">"</span>&gt;<span class="pl-pds">"</span></span>)
        .and(<span class="pl-s1"><span class="pl-pds">"</span>category_id<span class="pl-pds">"</span></span>, <span class="pl-c1">15</span>)
        .or(<span class="pl-s1"><span class="pl-pds">"</span>category_id<span class="pl-pds">"</span></span>, <span class="pl-c1">14</span>)
        .row()
        .then(<span class="pl-st">function</span>(<span class="pl-vpf">d</span>){
            <span class="pl-en">console</span><span class="pl-s3">.log</span>(d);
        });

    <span class="pl-c">// SELECT * FROM table1 WHERE id IN (?, ?, ?)</span>
    wSQL.<span class="pl-s3">select</span>()
        .from(<span class="pl-s1"><span class="pl-pds">"</span>table1<span class="pl-pds">"</span></span>)
        .where_in(<span class="pl-s1"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, [<span class="pl-c1">3</span>,<span class="pl-c1">4</span>,<span class="pl-c1">6</span>])
        .query()
        .then(<span class="pl-st">function</span>(<span class="pl-vpf">d</span>){
            <span class="pl-en">console</span><span class="pl-s3">.log</span>(d);
        });

    <span class="pl-c">// SELECT id, category_id, count(*) as amount FROM table1 GROUP BY category_id</span>
    wSQL.<span class="pl-s3">select</span>(<span class="pl-s1"><span class="pl-pds">"</span>id, category_id, count(*) as amount<span class="pl-pds">"</span></span>)
        .from(<span class="pl-s1"><span class="pl-pds">"</span>table1<span class="pl-pds">"</span></span>)
        .group_by(<span class="pl-s1"><span class="pl-pds">"</span>category_id<span class="pl-pds">"</span></span>)
        .query()
        .then(<span class="pl-st">function</span>(<span class="pl-vpf">d</span>){
            <span class="pl-en">console</span><span class="pl-s3">.log</span>(d);
        });

    <span class="pl-c">// SELECT id, category_id, count(*) as amount FROM table1 GROUP BY category_id HAVING category_id=? OR category_id=?</span>
    wSQL.<span class="pl-s3">select</span>(<span class="pl-s1"><span class="pl-pds">"</span>id, category_id, count(*) as amount<span class="pl-pds">"</span></span>)
        .from(<span class="pl-s1"><span class="pl-pds">"</span>table1<span class="pl-pds">"</span></span>)
        .group_by(<span class="pl-s1"><span class="pl-pds">"</span>category_id<span class="pl-pds">"</span></span>)
        .having(<span class="pl-s1"><span class="pl-pds">"</span>category_id<span class="pl-pds">"</span></span>, <span class="pl-c1">15</span>)
        .or(<span class="pl-s1"><span class="pl-pds">"</span>category_id<span class="pl-pds">"</span></span>, <span class="pl-c1">10</span>)
        .query()
        .then(<span class="pl-st">function</span>(<span class="pl-vpf">d</span>){
            <span class="pl-en">console</span><span class="pl-s3">.log</span>(d);
        });


    <span class="pl-c">// SELECT id, category_id, count(*) as amount FROM table1 WHERE id=57 GROUP BY category_id HAVING category_id=10</span>
    wSQL.<span class="pl-s3">select</span>(<span class="pl-s1"><span class="pl-pds">"</span>id, category_id, count(*) as amount<span class="pl-pds">"</span></span>)
        .from(<span class="pl-s1"><span class="pl-pds">"</span>table1<span class="pl-pds">"</span></span>)
        .where(<span class="pl-s1"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-c1">57</span>)
        .group_by(<span class="pl-s1"><span class="pl-pds">"</span>category_id<span class="pl-pds">"</span></span>)
        .having(<span class="pl-s1"><span class="pl-pds">"</span>category_id<span class="pl-pds">"</span></span>, <span class="pl-c1">10</span>)
        .or(<span class="pl-s1"><span class="pl-pds">"</span>category_id<span class="pl-pds">"</span></span>, <span class="pl-c1">15</span>)
        .query()
        .then(<span class="pl-st">function</span>(<span class="pl-vpf">d</span>){
            <span class="pl-en">console</span><span class="pl-s3">.log</span>(d);
        });

    <span class="pl-c">// INSERT INTO table1 (category_id) VALUES (?)</span>
    wSQL.insert(<span class="pl-s1"><span class="pl-pds">"</span>table1<span class="pl-pds">"</span></span>, {
        category_id<span class="pl-k">:</span> <span class="pl-c1">14</span>
    }).then(<span class="pl-st">function</span>(<span class="pl-vpf">insert</span>){
        <span class="pl-en">console</span><span class="pl-s3">.log</span>(<span class="pl-s1"><span class="pl-pds">"</span>insert_id<span class="pl-pds">"</span></span>);
        <span class="pl-en">console</span><span class="pl-s3">.log</span>(insert.insertId);
    });

    <span class="pl-c">// INSERT INTO table1 (category_id,category_name,test_field) SELECT ? as category_id,? as category_name,? as test_field UNION SELECT ?,?,? UNION SELECT ?,?,? UNION SELECT ?,?,?</span>
    wSQL.batch_insert(<span class="pl-s1"><span class="pl-pds">"</span>table1<span class="pl-pds">"</span></span>, [
        {
            category_id<span class="pl-k">:</span> <span class="pl-c1">1</span>,
            category_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>ttdasdas1<span class="pl-pds">"</span></span>,
            test_field<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>test_field1<span class="pl-pds">"</span></span>
        },
        {
            category_id<span class="pl-k">:</span> <span class="pl-c1">2</span>,
            category_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>ttdasdas2<span class="pl-pds">"</span></span>,
            test_field<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>test_field2<span class="pl-pds">"</span></span>
        },
        {
            category_id<span class="pl-k">:</span> <span class="pl-c1">3</span>,
            category_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>ttdasdas3<span class="pl-pds">"</span></span>,
            test_field<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>test_field3<span class="pl-pds">"</span></span>
        },
        {
            category_id<span class="pl-k">:</span> <span class="pl-c1">10</span>,
            category_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>ttdasdas4<span class="pl-pds">"</span></span>,
            test_field<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>test_field4<span class="pl-pds">"</span></span>
        }
    ]).then(<span class="pl-st">function</span>(<span class="pl-vpf">insert</span>){
        <span class="pl-en">console</span><span class="pl-s3">.log</span>(<span class="pl-s1"><span class="pl-pds">"</span>insert_id<span class="pl-pds">"</span></span>);
        <span class="pl-en">console</span><span class="pl-s3">.log</span>(insert.insertId);
    });

    <span class="pl-c">// UPDATE table1 SET category_id=? WHERE id=?</span>
    wSQL.update(<span class="pl-s1"><span class="pl-pds">"</span>table1<span class="pl-pds">"</span></span>, {category_id<span class="pl-k">:</span> <span class="pl-c1">6</span>})
        .where(<span class="pl-s1"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-c1">19</span>)
        .query()
        .then(<span class="pl-st">function</span>(<span class="pl-vpf">result</span>){
            <span class="pl-en">console</span><span class="pl-s3">.log</span>(result);
        });

    <span class="pl-c">// DELETE FROM table1 WHERE id = ?</span>
    wSQL.delete(<span class="pl-s1"><span class="pl-pds">"</span>table1<span class="pl-pds">"</span></span>)
        .where(<span class="pl-s1"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-c1">18</span>)
        .query()
        .then(<span class="pl-st">function</span>(<span class="pl-vpf">data</span>){
            <span class="pl-en">console</span><span class="pl-s3">.log</span>(data);
        });

});
</pre></div>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/igorizr1/wSQL/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/igorizr1/wSQL/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/igorizr1/wSQL"></a> is maintained by <a href="https://github.com/igorizr1">igorizr1</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
